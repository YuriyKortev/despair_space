import type {
  InfinitySubtype,
  FinitudeSubtype,
  NecessitySubtype,
  PossibilitySubtype,
  UnawarenessSubtype,
  AwarenessSubtype,
  Stage,
  AestheticSubtype,
  EthicalSubtype,
  ReligiousSubtype,
} from '../types';

interface Description {
  short: string;
  full: string;
}

// ===== ОПИСАНИЯ ЗОН ПРОСТРАНСТВА =====

export const ZONE_DESCRIPTIONS = {
  // Отчаяние бесконечности
  infinite: {
    imagination: {
      short: 'Потерялся в фантазиях',
      full: `Реальное «я» исчезло, замененное фантомом. Человек может воображать себя великим художником, спасителем мира, трагическим героем — но в реальности не делает ничего. Фантазия становится убежищем от конкретности существования. Чем ярче внутренний мир, тем бледнее реальная жизнь.`,
    },
    cognition: {
      short: 'Знает всё, кроме себя',
      full: `Накопление знаний без применения к собственной жизни. Может объяснить устройство вселенной, но не знает, как ему жить. Познание становится способом избежать экзистенциального вопроса. «Чем больше познаёт, тем меньше знает себя» — знание о мире заменяет знание о себе.`,
    },
    feeling: {
      short: 'Любит человечество, не выносит людей',
      full: `Чувства становятся абстрактными. Человек может рыдать над судьбой далёких народов, но раздражаться на конкретного соседа. Любовь к «человечеству» — способ избежать любви к ближнему. Эмоции направлены на идеи, не на реальных людей.`,
    },
    will: {
      short: 'Грандиозные планы, ноль действий',
      full: `Воля устремлена в бесконечность проектов, которые никогда не осуществятся. Каждый план грандиознее предыдущего — и каждый остаётся в голове. Конкретное действие кажется слишком мелким для таких масштабных замыслов.`,
    },
  } as Record<InfinitySubtype, Description>,

  // Отчаяние конечности
  finite: {
    conformist: {
      short: 'Делает как все',
      full: `Полная адаптация к окружению. Человек не рискует быть собой — слишком опасно выделяться. Он копирует соседей, следует моде, повторяет общие мнения. Мир называет это «здоровьем» и «социализацией». Но он потерял себя.`,
    },
    prudent: {
      short: 'Узкое благоразумие',
      full: `Жизнь сведена к расчёту выгоды и избеганию риска. Никаких порывов, никаких прыжков. «Благоразумие» становится тюрьмой, где каждый шаг взвешен и безопасен — и где нет места ничему подлинному.`,
    },
  } as Record<FinitudeSubtype, Description>,

  // Отчаяние возможности
  possibility: {
    combinatorial: {
      short: 'Комбинаторные фантазии',
      full: `Возможности множатся бесконечно. Каждый выбор открывает десять новых вариантов. Человек никогда ничего не выбирает окончательно — ведь выбор закрывает другие двери. Он перебирает комбинации вместо того, чтобы жить.`,
    },
    paralyzed: {
      short: 'Паралич от избытка вариантов',
      full: `Изобилие возможностей поглощает. Чем больше вариантов, тем труднее выбрать. В конце концов человек не может сделать даже простейший выбор — каждый кажется либо недостаточным, либо слишком рискованным.`,
    },
  } as Record<PossibilitySubtype, Description>,

  // Отчаяние необходимости
  necessity: {
    fatalist: {
      short: 'Всё предопределено',
      full: `«Что толку пытаться — всё уже решено». Человек сдаётся судьбе, року, обстоятельствам. Он не видит, что с Богом всё возможно. Необходимость стала абсолютной — и задушила всякую надежду.`,
    },
    determinist: {
      short: 'Научная неизбежность',
      full: `«Мы — продукт генов и среды». Человек объясняет всё причинно-следственными цепями и не оставляет места свободе. Он может быть интеллектуально изощрён — но экзистенциально мёртв. Всё объяснено, значит — ничего нельзя изменить.`,
    },
  } as Record<NecessitySubtype, Description>,

  // Осознанность (базовые уровни)
  consciousness: {
    unconscious: {
      short: 'Не знает, что болен',
      full: `Самая опасная форма отчаяния — потому что незаметна. Человек может быть вполне доволен жизнью. Он не задаёт вопрос «кто я?» — и потому не может получить ответ. Его отчаяние глубже, чем у того, кто мучается.`,
    },
    semiconscious: {
      short: 'Смутная тревога',
      full: `Что-то не так, но непонятно что. Периодами накатывает тоска, бессмысленность. Человек глушит это работой, развлечениями, отношениями — но тревога возвращается. Он на пороге осознания — и боится переступить.`,
    },
    conscious: {
      short: 'Знает своё отчаяние',
      full: `Видит болезнь — но не знает лекарства. Или знает, но не хочет принимать. Это может быть мучительная честность — или демоническое упрямство. Осознание без веры — это ад при жизни.`,
    },
  },

  // Подтипы неведения
  unawareness: {
    naive: {
      short: 'Наивное неведение',
      full: `Блаженное незнание. Человек просто не подозревает о существовании проблемы. Живёт как дышит, не задаваясь вопросами о смысле. Это не выбор — это отсутствие выбора. Возможно, самая комфортная и самая опасная позиция.`,
    },
    busy: {
      short: 'Занятость как бегство',
      full: `Дела, проекты, обязанности заполняют каждую минуту. Некогда думать — надо действовать. Но за этой суетой скрывается страх остановиться и посмотреть в глаза пустоте. Занятость — это анестезия от экзистенциальной боли.`,
    },
    denial: {
      short: 'Активное отрицание',
      full: `Знает, но отказывается видеть. Когда правда стучится в дверь — запирается изнутри. Это не невинное незнание, а выбор не знать. Человек чувствует бездну рядом — и отворачивается, делая вид, что её нет.`,
    },
  } as Record<UnawarenessSubtype, Description>,

  // Подтипы осознанности
  awareness: {
    suffering: {
      short: 'Страдающее осознание',
      full: `Видит правду — и она причиняет боль. Отчаяние стало явным, его уже не спрячешь. Человек мучается, но в этом мучении есть честность. Страдание может стать дверью к преображению — или тюрьмой без выхода.`,
    },
    defiant: {
      short: 'Дерзкое осознание',
      full: `Знает истину — и бросает ей вызов. Упрямо держится за своё отчаяние как за последнее достояние. «Я буду страдать по-своему!» Гордость не позволяет принять помощь, даже если она существует. Демоническое самоутверждение в отрицании.`,
    },
  } as Record<AwarenessSubtype, Description>,
};

// ===== ОПИСАНИЯ СТАДИЙ =====

export const STAGE_DESCRIPTIONS = {
  aesthetic: {
    base: {
      short: 'Живёт моментом',
      full: `Высшая ценность — интересное, приятное, новое. Эстетик избегает выбора, потому что выбор закрывает возможности. Он скользит по поверхности жизни, собирая впечатления. Скука — его главный враг.`,
    },
    subtypes: {
      sensual: {
        short: 'Чувственный эстетик',
        full: `Дон Жуан: погоня за наслаждением. Каждое новое удовольствие должно быть сильнее предыдущего. Но закон убывающей отдачи неумолим — и в конце ждёт пустота.`,
      },
      romantic: {
        short: 'Романтик-мечтатель',
        full: `Живёт в мире воображения. Реальность слишком груба для его тонкой души. Он влюблён в идею любви, очарован идеей приключения — но конкретная любовь, конкретное приключение его разочаровывают.`,
      },
      intellectual: {
        short: 'Эстетик-интеллектуал',
        full: `Наслаждается идеями, теориями, системами. Жизнь — спектакль, который он наблюдает с ироничной дистанции. Он слишком умён, чтобы во что-то верить, слишком проницателен, чтобы что-то делать.`,
      },
    } as Record<AestheticSubtype, Description>,
  },

  ethical: {
    base: {
      short: 'Живёт долгом',
      full: `Высшая ценность — постоянство, обязательство, выбор. Этик выбирает себя, принимает ответственность, строит жизнь на фундаменте решений. Но этическое — ещё не религиозное. Можно быть добропорядочным и быть в отчаянии.`,
    },
    subtypes: {
      civic: {
        short: 'Гражданственный долг',
        full: `Честен, надёжен, выполняет обязательства перед обществом. Мир считает его образцом гражданина. Но он не задаёт вопрос о Боге — этика заменила ему религию. Он думает, что спасётся собственными силами. Это отчаяние.`,
      },
      heroic: {
        short: 'Трагический герой',
        full: `Жертвует собой ради высшего — народа, идеи, долга. Агамемнон приносит в жертву Ифигению. Герой понятен, его мотивы прозрачны. Но он остаётся в рамках всеобщего — он не Авраам.`,
      },
    } as Record<EthicalSubtype, Description>,
  },

  religious: {
    base: {
      short: 'Живёт перед Богом',
      full: `Высшая ценность — отношение с Абсолютом. Религиозный человек понимает, что этика недостаточна, что своими силами не спастись. Он стоит перед Богом — один на один, без посредников.`,
    },
    subtypes: {
      immanent: {
        short: 'Имманентная религиозность',
        full: `Бог познаётся через углубление в себя. Страдание — путь к Богу. Человек умирает для мира, отрешается от конечного. Это ещё не христианство — это может быть Сократ.`,
      },
      paradoxical: {
        short: 'Парадоксальная вера',
        full: `Прыжок веры через абсурд. Авраам верит, что получит Исаака обратно — вопреки всякой логике. Вечное вошло во время, Бог стал человеком — скандал для разума. Вера — не знание, а рискованное «да».`,
      },
    } as Record<ReligiousSubtype, Description>,
  },
} as Record<Stage, { base: Description; subtypes: Record<string, Description> }>;

// ===== ПЕРЕВОДЫ =====

export const STAGE_NAMES: Record<Stage, string> = {
  aesthetic: 'Эстетическая',
  ethical: 'Этическая',
  religious: 'Религиозная',
};

export const SUBTYPE_NAMES: Record<string, string> = {
  // Эстетические
  sensual: 'Чувственный',
  romantic: 'Романтик',
  intellectual: 'Интеллектуал',
  // Этические
  civic: 'Гражданственный',
  heroic: 'Трагический герой',
  // Религиозные
  immanent: 'Имманентная',
  paradoxical: 'Парадоксальная',
  // Бесконечность
  imagination: 'Фантазии',
  cognition: 'Познание',
  feeling: 'Абстрактные чувства',
  will: 'Грандиозные планы',
  // Конечность
  conformist: 'Конформист',
  prudent: 'Благоразумие',
  // Необходимость
  fatalist: 'Фаталист',
  determinist: 'Детерминист',
  // Возможность
  combinatorial: 'Комбинатор',
  paralyzed: 'Парализованный',
  // Неведение
  naive: 'Наивный',
  busy: 'Занятой',
  denial: 'Отрицание',
  // Осознанность
  suffering: 'Страдающий',
  defiant: 'Дерзкий',
};

export const TRANSITION_NAMES: Record<string, string> = {
  evolution: 'Эволюция',
  crisis: 'Кризис',
  branch: 'Развилка',
};

export const getStageDescription = (stage: Stage): Description => {
  return STAGE_DESCRIPTIONS[stage]?.base || { short: '', full: '' };
};

export const getSubtypeDescription = (stage: Stage, subtype: string): Description | null => {
  return STAGE_DESCRIPTIONS[stage]?.subtypes?.[subtype] || null;
};
